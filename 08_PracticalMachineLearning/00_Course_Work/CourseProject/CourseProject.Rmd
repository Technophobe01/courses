---
title: "08 Machine Learning - Course Project"
author: "Technophobe01"
date: '`r Sys.Date()`'
output:
  html_document: default
  pdf_document:
    fig_caption: no
    number_sections: yes
header-includes: \usepackage[compact]{titlesec} \titlespacing{\section}{0pt}{0pt}{0pt}
---

```{r setOptions, echo=FALSE, message=FALSE, results='hide'}
require(knitr)
opts_chunk$set(fig.width = 8, fig.height=5, 
               fig.path = 'Figs/',
# Dev Setup / Production setup
               cache = FALSE, echo = TRUE, warning = TRUE, message = TRUE, results = 'show')
#               cache = FALSE, echo = FALSE, warning = FALSE, message = FALSE, results = 'show')
require(knitcitations)
cleanbib()
```

```{r Setup, echo=FALSE, message=FALSE, results='hide'}
setwd("~/Documents/Dropbox/dev/cousera/courses/08_PracticalMachineLearning/00_Course_Work/CourseProject")

# Load the required R packages...
#
requiredPackages <- c("ggplot2",        # Used to plot graphics 
                      "gtable",
                      "ggthemes",       # Extra themes, scales and geoms for ggplot (Very cool!)
                      "xtable",
                      "caret",          # Classification and Regression Training Library
                      "randomForest")   # Breiman and Cutler's random forests for classification and regression

ipak <- function(pkg){
        new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
        if (length(new.pkg))
                install.packages(new.pkg, dependencies = TRUE)
        sapply(pkg, require, character.only = TRUE)
}

ipak(requiredPackages)
```

# Executive Summary  

The purpose of this document is to develop and answer the [Coursera Peer Assessment for the Practical Machine Learning Course][0]. This reports source code is available via **[GitHub][1]**, if you wish to reveiw the markdown formatting in more detail.

Using devices such as Jawbone Up, Nike FuelBand, and Fitbit it is now possible to collect a large amount of data about personal activity relatively inexpensively. These type of devices are part of the _**quantified self movement**_ – a group of enthusiasts who take measurements about themselves regularly to improve their health, to find patterns in their behavior, or because they are tech geeks. One thing that people regularly do is quantify how much of a particular activity they do, _but_ **they rarely quantify how well they do it**. 

The goal of this project is to use the referenced data caputured from accelerometers on the belt, forearm, arm, and dumbell of 6 participants to *predict* how the participants performed the exercises. This report describes: 

1. How a model was built to frame and analyse the data
1. How cross validation was used to confirm the results and what the estimated expected out of sample error is of the analysis
1. What choices were made to define the results and guide the anlysis.

seperaralty we use the prediction data to generate 

1. 20 different test case results which are to be submitted to coursera. 

**Note:** More information is available from the website here: http://groupware.les.inf.puc-rio.br/har (see the section on the Weight Lifting Exercise Dataset) on the specific exercises measured and predicted. 

## Data Set Description

Participants were supervised by an experienced weight lifter to make sure the execution complied to the manner they were supposed to simulate. The exercises were performed by six male participants aged between 20-28 years, with little weight lifting experience. All participants were vetted to ensure they could easily simulate the mistakes in a safe and controlled manner by using a relatively light dumbbell (1.25kg).

The participants were asked to perform barbell lifts *correctly* and *incorrectly* in 5 different ways. Six young healthy participants were asked to perform one set of 10 repetitions of the Unilateral Dumbbell Biceps Curl in five different fashions: 

1. (Class A) - exactly according to the specification 
1. (Class B) - throwing the elbows to the front 
1. (Class C) - lifting the dumbbell only halfway 
1. (Class D) - lowering the dumbbell only halfway 
1. (Class E) - throwing the hips to the front 

Read more: http://groupware.les.inf.puc-rio.br/har#dataset#ixzz3gge1uKYv

## Data Import

``` {r loadData, echo=FALSE}

# #############################################################################
# 
# 1. Load, the training and test data
# 
# The first step is to download the training and test data into the data 
# subdirectory,  we create the director if it does not exist. This program
# assumes that all the data will be dowloaded into the 'data' directory below
# the working directory.
# 

trainDataURL = "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv"
testDataURL = "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv"

dataDir         <- "./data"
trainData       <- "pml-training.csv"
testData        <- "pml-testing.csv"

trainDataPath   <- file.path(dataDir, trainData)
testDataPath    <- file.path(dataDir, testData)

# If the data dire does not exist we create it, so it can be used to store the
# downloaded data

if (!file.exists(dataDir)) {
        dir.create(dataDir)
}

# Now we can download files into the data subdirectory. 

if (!file.exists(testDataPath)) {
        download.file(testDataURL, testDataPath, mode="wb", method = "curl")
}        

if (!file.exists(trainDataPath)) {
        download.file(trainDataURL, trainDataPath, mode="wb", method = "curl")
}

# Load the baseData in preperation for review, cleanup and subsequent
# manipulation...
# 
# Hindsight. The trainData contains a lot of messy NA, "" data we update the
# read.cvs import to strip and replace the various NA data...

testBaseData <- read.csv(testDataPath, na.strings=c("NA","NaN","#DIV/0!", ""))
trainBaseData <- read.csv(trainDataPath, na.strings=c("NA","NaN","#DIV/0!", ""))

# Get a quick sense of the data by listing the structure of the data and summarising the data...

# str(trainBaseData)
# summary(trainBaseData)
# 
# str(testBaseData)
# summary(testBaseData)
# 
# Note lots of NA's, hmmm time to re-read 'Qualitative Activity Recognition of Weight Lifting Exercises' paper...
# 
```

The our first step is to download and load the base data from `pml-training.csv` and `pml-testing.csv` into R. We note that `trainBaseData` has `r dim(trainBaseData)` objects and variables, whilst `testBaseData` has `r dim(testBaseData)` objects and variables.

``` {r stripData, echo=TRUE}
# Our goal here is to strip out the non applicable data. Our first step was to 
# update the csv files loaded to strip out miscellaneous values such as spaces 
# Now we strip all columns from the test data that have NA in them.
testBaseData <- testBaseData[colSums(is.na(testBaseData)) == 0]
# Note: The problem_id field in the testBaseData does not exist in the
# trainBaseData so we remove it prior to subsetting the trainBaseData...  
testBaseData <- subset(testBaseData,select=-(problem_id))
# hindsight: Problem_id is used by the submission fucntion to Coursera 
# we will fix this later... For now it makes for clean thinking...

# Now we strip out the non data columns...
testBaseData <- subset(testBaseData,select=-(1:7))
# Now we subset the trainBasedata to match the same set of columns as the
# testBaseData and do a quick check to compare the column names match...
trainBaseData <- subset(trainBaseData,select=c(colnames(testBaseData)))
# t <- compare(colnames(testBaseData),colnames(trainBaseData))
```

The data was collected from four 9 degrees of freedom Razor inertial measurement units (IMU), which provide three-axes acceleration, gyroscope and magnetometer data at a joint sampling rate of 45 Hz. Each IMU also featured a Bluetooth module to stream the recorded data to a notebook running the Context Recognition Network Toolbox. The the sensors were mounted in the users’ glove, armband, lumbar belt and dumbbell. The tracking system was designed to be as unobtrusive as possible, as these are all equipmentm commonly used by weight lifters.

After cleaning the data source we `testBaseData` and `pml-testing.csv` into R. We note that `trainBaseData` has `r dim(trainBaseData)` objects and variables, whilst `testBaseData` has `r dim(testBaseData)` objects and variables.

``` {r showCleanData, echo=TRUE}

```

# Analysis Goals

## Analysis Results

# Conclusions

\pagebreak

# Appendix A


\pagebreak


# **References**

- *Data Classification of Body Postures and Movements.* 

    - By: Ugulino, W.; Cardador, D.; Vega, K.; Velloso, E.; Milidiu, R.; Fuks, H. Wearable Computing: Accelerometers' 
    - Proceedings of 21st Brazilian Symposium on Artificial Intelligence. Advances in Artificial Intelligence - SBIA 2012. In: Lecture Notes in Computer Science. , pp. 52-61. Curitiba, PR: Springer Berlin / Heidelberg, 2012. ISBN 978-3-642-34458-9. DOI: 10.1007/978-3-642-34459-6_6. 

- *Applied Predictive Modeling*   

    - By: Max Kuln, Kjell Johnson, Publisher: Springer; Pub Date: May 17, 2013, eISBN: 978-1-461-46848-6

- *The R Book*   

    - By: Michael J. Crawley, Publisher: John Wiley & Sons Pub. Date: December 26, 2012, eISBN: 978-1-118-44896-0   
    
- *An Introduction to Statistical Learning*

    - By: Gareth James (Author), Daniela Witten (Author), Trevor Hastie (Author), Robert Tibshirani (Author)

- *The Elements of Statistical Learning*

    - By: Trevor Hastie (Author), Robert Tibshirani (Author), Jerome Friedman (Author)

- *R in Action*    

    - By: Robert Kabacoff Publisher: Manning Publications Pub. Date: August 24, 2011, ISBN-10: 1-935182-39-0   

- *Mathematical Statistics with Resampling and R*

    - By: Laura Chihara; Tim Hesterberg Publisher: John Wiley & Sons Pub. Date: September 6, 2011 Print ISBN: 978-1-11-02985-5   

- *OpenIntro Statistics - 2nd Editions*

    - By: by David M Diez (Author), Christopher D Barr (Author), Mine Çetinkaya-Rundel (Author) 

- *Think Stats, 2nd Edition*

    - By: Allen B. Downey Publisher: O'Reilly Media, Inc. Pub. Date: October 28, 2014 Print ISBN-13: 978-1-4919-0733-7

[0]: https://class.coursera.org/predmachlearn-030
[1]: https://github.com/Technophobe01/courses/blob/master/08_PracticalMachineLearning/00_Course_Work/CourseProject/
[2]: https://github.com/Technophobe01/courses/tree/master/08_RegressionModels/00_Course_Work/CourseProject

